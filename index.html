<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HydraTrack - Lembrete de Hidrata√ß√£o</title>
    <meta
      name="description"
      content="Monitore sua hidrata√ß√£o de forma inteligente"
    />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2300bcd4'><path d='M12 2c1 3 4 6 4 9a4 4 0 0 1-8 0c0-3 3-6 4-9z'/></svg>"
      type="image/svg+xml"
    />

    <meta
      http-equiv="cache-control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.5.0/dist/peerjs.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <canvas id="particle-canvas"></canvas>
    <div id="celebration-overlay"></div>

    <div id="onboarding" class="onboarding-container">
      <div class="onboarding-card">
        <div class="progress-section">
          <div class="progress-info">
            <span id="step-info">Passo 1 de 5</span>
            <span id="progress-percentage">20%</span>
          </div>
          <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
          </div>
        </div>
        <div id="step-content" class="step-content"></div>
        <div class="navigation">
          <button id="back-btn" class="btn btn-outline" style="display: none">
            Voltar
          </button>
          <button id="next-btn" class="btn btn-primary">Pr√≥ximo</button>
        </div>
      </div>
    </div>

    <div id="dashboard" class="dashboard-container" style="display: none">
      <header class="header">
        <div class="header-content">
          <div class="greeting">
            <h1 id="greeting-text" class="greeting-title"></h1>
            <p id="motivational-message" class="greeting-subtitle"></p>
          </div>
          <div class="header-actions">
            <div class="streak-badge">
              <svg class="streak-icon" viewBox="0 0 24 24">
                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
              </svg>
              <span id="streak-count">0</span> dias
            </div>
            <button id="achievements-btn" class="btn-icon" title="Conquistas">
              üèÜ
            </button>
            <button id="friends-btn" class="btn-icon" title="Amigos">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V18h14v-1.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V18h6v-1.5c0-2.33-4.67-3.5-7-3.5z"
                />
              </svg>
            </button>
            <button id="theme-toggle-btn" class="btn-icon">
              <svg id="theme-icon" viewBox="0 0 24 24"></svg>
            </button>
            <button id="settings-btn" class="btn-icon">
              <svg viewBox="0 0 24 24">
                <path
                  d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.69-1.62-0.92L14.4,2.23C14.34,2.01,14.13,1.86,13.89,1.86 h-3.78c-0.24,0-0.45,0.15-0.51,0.37L9.07,4.42c-0.59,0.23-1.12,0.54-1.62,0.92L5.06,4.38C4.84,4.31,4.59,4.37,4.47,4.58L2.55,7.9 c-0.1,0.2-0.06,0.47,0.12,0.61l2.03,1.58C4.68,10.42,4.66,10.72,4.66,11s0.02,0.58,0.07,0.86l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.69,1.62,0.92l0.54,2.19 c0.06,0.22,0.27,0.37,0.51,0.37h3.78c0.24,0,0.45-0.15,0.51-0.37l0.54-2.19c0.59-0.23,1.12-0.54,1.62-0.92l2.39,0.96 c0.22,0.08,0.47,0.01,0.59-0.22l1.92-3.32c0.12-0.2,0.07-0.47-0.12-0.61L19.14,12.94z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3 s3,1.34,3,3S13.66,15,12,15z"
                />
              </svg>
            </button>
          </div>
        </div>
      </header>

      <main class="main-content">
        <section class="glass-section">
          <div class="main-display-area">
            <div
              id="friends-glasses-container"
              class="friends-glasses-container"
            ></div>
            <div class="pet-container">
              <div id="glass-container" class="water-glass-container">
                <div id="water-glass" class="water-glass">
                  <svg viewBox="0 0 120 160" class="glass-svg">
                    <defs>
                      <clipPath id="glass-clip">
                        <path d="M22 22 L98 22 L93 138 L27 138 Z" />
                      </clipPath>
                      <linearGradient
                        id="water-gradient"
                        x1="0%"
                        y1="0%"
                        x2="0%"
                        y2="100%"
                      >
                        <stop
                          offset="0%"
                          stop-color="hsl(var(--primary-glow))"
                          stop-opacity="0.9"
                        />
                        <stop
                          offset="50%"
                          stop-color="hsl(var(--primary))"
                          stop-opacity="0.8"
                        />
                        <stop
                          offset="100%"
                          stop-color="hsl(var(--primary))"
                          stop-opacity="1"
                        />
                      </linearGradient>
                    </defs>
                    <g clip-path="url(#glass-clip)">
                      <rect
                        id="water-fill"
                        x="22"
                        y="138"
                        width="76"
                        height="0"
                        fill="url(#water-gradient)"
                      />
                      <g class="bubbles-container">
                        <circle
                          class="bubble bubble-1"
                          cx="40"
                          cy="135"
                          r="3"
                        />
                        <circle
                          class="bubble bubble-2"
                          cx="60"
                          cy="135"
                          r="4"
                        />
                        <circle
                          class="bubble bubble-3"
                          cx="85"
                          cy="135"
                          r="2.5"
                        />
                      </g>
                    </g>
                    <path
                      d="M20 20 L100 20 L95 140 L25 140 Z"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="3"
                      class="glass-outline"
                    />
                    <path
                      id="wave-1"
                      d="M22 138 Q40 136 60 138 T98 138"
                      stroke="hsl(var(--primary-glow))"
                      stroke-width="1.5"
                      fill="none"
                      class="wave"
                      style="opacity: 0"
                    />
                    <path
                      id="wave-2"
                      d="M22 138 Q50 139 80 138 T98 138"
                      stroke="hsl(var(--primary))"
                      stroke-width="1"
                      fill="none"
                      class="wave-delay"
                      style="opacity: 0"
                    />
                    <path
                      d="M25 25 L35 25 L33 130 L27 130 Z"
                      fill="white"
                      opacity="0.3"
                    />
                  </svg>
                </div>
              </div>

              <div id="axolotl-container" class="water-glass-container">
                <img
                  id="axolotl-image"
                  src="assets/images/axolotl/TRISTE1.png"
                  alt="Axolotl"
                  class="axolotl-image"
                />
              </div>
              <div
                id="frog-container"
                class="water-glass-container hidden-character"
              >
                <img
                  id="frog-image"
                  src="assets/images/frog/TRISTE1.png"
                  alt="Sapo"
                  class="axolotl-image"
                />
              </div>
              <div id="character-bubble-overlay"></div>
              <div class="progress-text">
                <span id="percentage-text" class="percentage">0%</span>
                <p id="amount-text" class="amount-text">0ml de 2000ml</p>
              </div>
            </div>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div id="consumed-stat" class="stat-value">0</div>
              <div class="stat-label">Consumido</div>
            </div>
            <div class="stat-card">
              <div id="remaining-stat" class="stat-value">2000</div>
              <div class="stat-label">Restante</div>
            </div>
            <div class="stat-card">
              <div id="logs-stat" class="stat-value">0</div>
              <div class="stat-label">Registros</div>
            </div>
          </div>
        </section>

        <section class="quick-add-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24">
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 12.17l7.59-7.59L19 6l-9 9z"
              />
            </svg>
            Registrar Consumo
          </h2>
          <div id="quick-buttons-container" class="quick-buttons"></div>
          <div class="custom-amount-card">
            <h3 class="custom-title">Quantidade Personalizada</h3>
            <div class="custom-input-group">
              <input
                type="number"
                id="custom-amount"
                placeholder="Ex: 350"
                min="1"
                max="2000"
              />
              <button id="add-custom-btn" class="btn">
                <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14" /></svg>
                Adicionar
              </button>
            </div>
            <p class="custom-help">Digite a quantidade em ml (1-2000)</p>
          </div>
        </section>

        <section class="timeline-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" />
              <polyline points="12,6 12,12 16,14" />
            </svg>
            Timeline de Hoje
          </h2>
          <div id="timeline-container" class="timeline-container"></div>
        </section>

        <section class="progress-overview-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24">
              <path
                d="M21 6.5c-1.3 0-2.5.6-3.4 1.5H6.9c-.9-.9-2.1-1.5-3.4-1.5-1.9 0-3.5 1.6-3.5 3.5s1.6 3.5 3.5 3.5c1.3 0 2.5-.6 3.4-1.5h10.2c.9.9 2.1 1.5 3.4 1.5 1.9 0 3.5-1.6 3.5-3.5S22.9 6.5 21 6.5z"
              />
            </svg>
            Progresso da Semana
          </h2>
          <div class="progress-card">
            <div class="progress-header">
              <span>Meta Di√°ria</span>
              <span id="daily-percentage">0%</span>
            </div>
            <div class="progress-bar-large">
              <div id="daily-progress-fill" class="progress-bar-fill"></div>
            </div>
            <div id="week-grid-container" class="week-grid"></div>
          </div>
        </section>
      </main>
      <footer class="site-footer">
        <a
          href="https://nubank.com.br/cobrar/3upen/672bafe3-8951-4aae-8e53-d86628e67a1a"
          target="_blank"
          rel="noopener noreferrer"
          class="btn btn-donate"
          id="donate-link"
        >
          <svg
            viewBox="0 0 24 24"
            fill="currentColor"
            style="width: 1.25rem; height: 1.25rem; margin-right: 0.5rem"
          >
            <path
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            ></path>
          </svg>
          Apoie o Projeto
        </a>
      </footer>
    </div>

    <div
      id="achievements-modal"
      class="settings-modal-overlay"
      style="display: none"
    >
      <div class="settings-modal-card">
        <div class="settings-modal-header">
          <h2>Conquistas Desbloqueadas</h2>
          <button id="close-achievements-btn" class="btn-icon">&times;</button>
        </div>
        <div id="achievements-list" class="settings-modal-content"></div>
      </div>
    </div>

    <div
      id="settings-modal"
      class="settings-modal-overlay"
      style="display: none"
    >
      <div class="settings-modal-card">
        <div class="settings-modal-header">
          <h2>Configura√ß√µes</h2>
          <button id="close-settings-btn" class="btn-icon">&times;</button>
        </div>
        <div class="settings-modal-content"></div>
      </div>
    </div>

    <div
      id="friends-modal"
      class="settings-modal-overlay"
      style="display: none"
    >
      <div class="settings-modal-card">
        <div class="settings-modal-header">
          <h2>Amigos & Conex√µes</h2>
          <button id="close-friends-btn" class="btn-icon">&times;</button>
        </div>
        <div id="friends-modal-content" class="settings-modal-content">
          <div class="settings-group">
            <h3>Encontrar Amigos</h3>
            <p
              class="custom-help"
              style="text-align: left; margin-bottom: 1rem"
            >
              Encontre amigos online ou conecte-se diretamente usando o c√≥digo
              de convite.
            </p>
            <button
              id="find-friends-btn"
              class="btn btn-secondary"
              style="width: 100%; margin-bottom: 1.5rem"
              disabled
            >
              <svg
                viewBox="0 0 24 24"
                fill="currentColor"
                style="width: 1.25rem; height: 1.25rem; margin-right: 0.5rem"
              >
                <path
                  d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                />
              </svg>
              Companheiros de Jornada
            </button>
          </div>
          <div class="connection-status">
            <div class="form-group">
              <label for="my-peer-id" class="form-label"
                >Seu C√≥digo de Convite:</label
              >
              <div class="peer-id-container">
                <input
                  type="text"
                  id="my-peer-id"
                  class="form-input"
                  readonly
                  value="Gerando c√≥digo..."
                />
                <button
                  id="copy-peer-id-btn"
                  class="btn-icon"
                  title="Copiar c√≥digo"
                >
                  üìã
                </button>
              </div>
            </div>
            <p id="connection-state" class="custom-help">
              Status: Desconectado
            </p>
          </div>
          <div class="settings-group">
            <h3>Conectar a um Amigo</h3>
            <div class="custom-input-group">
              <input
                type="text"
                id="friend-peer-id"
                placeholder="Cole o c√≥digo do amigo aqui"
              />
              <button id="connect-friend-btn" class="btn">Conectar</button>
            </div>
          </div>
          <div class="settings-group">
            <h3>Notifica√ß√µes de Amigos</h3>
            <div id="friend-notification-settings"></div>
          </div>
          <div class="settings-group">
            <h3>Amigos Conectados</h3>
            <div id="friends-list" class="friends-list-container">
              <p class="empty-list-info">
                Voc√™ n√£o est√° conectado a nenhum amigo ainda.
              </p>
            </div>
          </div>
          <div class="settings-actions">
            <button id="disconnect-all-btn" class="btn btn-destructive">
              Desconectar de Todos
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="reminder-modal" class="modal-overlay" style="display: none">
      <div class="modal-card">
        <div class="modal-icon">üíß</div>
        <h3 class="modal-title">Hora de se Hidratar!</h3>
        <p class="modal-text">
          Clique no bot√£o para confirmar e parar o som do lembrete.
        </p>
        <div class="modal-actions">
          <button id="confirm-hydration-btn" class="btn btn-primary">
            Ok, vou beber!
          </button>
        </div>
      </div>
    </div>

    <div
      id="delete-confirm-modal"
      class="settings-modal-overlay"
      style="display: none"
    >
      <div class="settings-modal-card">
        <div class="settings-modal-header">
          <h2>Confirmar Exclus√£o</h2>
          <button id="close-delete-modal-btn" class="btn-icon">&times;</button>
        </div>
        <div class="delete-modal-content">
          <p>Voc√™ tem certeza que deseja apagar todos os seus dados?</p>
          <p><strong>Esta a√ß√£o n√£o pode ser desfeita.</strong></p>
          <div class="settings-actions">
            <button id="cancel-delete-btn" class="btn btn-outline">
              Cancelar
            </button>
            <button id="confirm-delete-btn" class="btn btn-destructive">
              Sim, Excluir Tudo
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      id="user-list-modal"
      class="settings-modal-overlay"
      style="display: none"
    >
      <div class="settings-modal-card">
        <div class="settings-modal-header">
          <h2>Companheiros de Jornada</h2>
          <div class="modal-header-actions">
            <button
              id="refresh-user-list-btn"
              class="btn-icon"
              title="Atualizar lista"
            >
            <div class="icon-refresh"></div>
            </button>
            <button id="close-user-list-btn" class="btn-icon">&times;</button>
          </div>
        </div>
        <div class="settings-modal-content">
          <div
            id="user-list-loading"
            class="loading-overlay"
            style="display: none"
          >
            <div class="loading-spinner"></div>
            <p>Procurando por Companheiros...</p>
          </div>
          <ul id="user-list" class="user-list-group"></ul>
        </div>
      </div>
    </div>

    <div id="toast-container"></div>

    <div
      id="connection-request-modal"
      class="modal-overlay"
      style="display: none"
    >
      <div class="modal-card">
        <div class="modal-icon">ü§ù</div>
        <h3 class="modal-title">Solicita√ß√£o de Conex√£o</h3>
        <p class="modal-text" id="connection-request-text"></p>
        <div class="modal-actions">
          <button id="reject-connection-btn" class="btn btn-destructive">
            Rejeitar
          </button>
          <button id="accept-connection-btn" class="btn btn-primary">
            Aceitar
          </button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
